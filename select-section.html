<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… - Ù…Ø³Ø§Ø±ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: { extend: { fontFamily: { tajawal: ['Tajawal', 'sans-serif'] } } }
        }
    </script>
    <style>
        * { font-family: 'Tajawal', sans-serif; }
        body {
            background: linear-gradient(135deg, #0f0a2e 0%, #1a1145 30%, #1e1550 50%, #151040 70%, #0d0825 100%);
            min-height: 100vh;
        }

        /* Section Cards */
        .section-card {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            backdrop-filter: blur(20px);
            border-radius: 1.5rem;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        .section-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 4px;
            border-radius: 1.5rem 1.5rem 0 0;
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        .section-card:hover::before { opacity: 1; }
        .section-card:hover {
            background: rgba(255,255,255,0.07);
            border-color: rgba(255,255,255,0.15);
            transform: translateY(-6px);
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }

        /* Card Color Themes */
        .card-quant::before { background: linear-gradient(90deg, #3b82f6, #6366f1); }
        .card-quant:hover { border-color: rgba(59,130,246,0.3); box-shadow: 0 20px 60px rgba(59,130,246,0.15); }
        .card-verbal::before { background: linear-gradient(90deg, #10b981, #14b8a6); }
        .card-verbal:hover { border-color: rgba(16,185,129,0.3); box-shadow: 0 20px 60px rgba(16,185,129,0.15); }
        .card-tahsili::before { background: linear-gradient(90deg, #a855f7, #8b5cf6); }
        .card-tahsili:hover { border-color: rgba(168,85,247,0.3); box-shadow: 0 20px 60px rgba(168,85,247,0.15); }

        /* Icon Circle */
        .icon-circle {
            width: 56px; height: 56px;
            border-radius: 16px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        .icon-quant { background: linear-gradient(135deg, #3b82f6, #6366f1); }
        .icon-verbal { background: linear-gradient(135deg, #10b981, #14b8a6); }
        .icon-tahsili { background: linear-gradient(135deg, #a855f7, #8b5cf6); }

        /* Subject Tags */
        .subject-tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 0.7rem;
            font-weight: 500;
        }
        .tag-quant { background: rgba(59,130,246,0.1); color: #93c5fd; }
        .tag-verbal { background: rgba(16,185,129,0.1); color: #6ee7b7; }
        .tag-tahsili { background: rgba(168,85,247,0.1); color: #d8b4fe; }

        /* Count Badge */
        .count-badge {
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 12px;
            padding: 10px;
            text-align: center;
        }

        /* Start Button */
        .btn-start {
            width: 100%;
            padding: 14px;
            border-radius: 14px;
            font-weight: 800;
            font-size: 0.95rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            position: relative;
            overflow: hidden;
        }
        .btn-start::before {
            content: '';
            position: absolute;
            top: 0; left: -100%; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            transition: left 0.5s ease;
        }
        .btn-start:hover::before { left: 100%; }
        .btn-start:hover { transform: translateY(-2px); }
        .btn-start:active { transform: translateY(0); }
        .btn-start:disabled { opacity: 0.4; cursor: not-allowed; transform: none !important; }

        .btn-quant { background: linear-gradient(135deg, #3b82f6, #6366f1); box-shadow: 0 8px 25px rgba(59,130,246,0.25); }
        .btn-quant:hover { box-shadow: 0 12px 35px rgba(59,130,246,0.35); }
        .btn-verbal { background: linear-gradient(135deg, #10b981, #14b8a6); box-shadow: 0 8px 25px rgba(16,185,129,0.25); }
        .btn-verbal:hover { box-shadow: 0 12px 35px rgba(16,185,129,0.35); }
        .btn-tahsili { background: linear-gradient(135deg, #a855f7, #8b5cf6); box-shadow: 0 8px 25px rgba(168,85,247,0.25); }
        .btn-tahsili:hover { box-shadow: 0 12px 35px rgba(168,85,247,0.35); }

        /* Animations */
        @keyframes fadeUp { from { opacity: 0; transform: translateY(25px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeUp 0.5s ease forwards; }
        .delay-1 { animation-delay: 0.1s; opacity: 0; }
        .delay-2 { animation-delay: 0.2s; opacity: 0; }
        .delay-3 { animation-delay: 0.3s; opacity: 0; }
        .delay-4 { animation-delay: 0.4s; opacity: 0; }

        /* Marquee */
        .marquee-container { overflow: hidden; white-space: nowrap; }
        .marquee-text { display: inline-block; animation: marquee 25s linear infinite; }
        @keyframes marquee { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* Loading shimmer for counts */
        .shimmer {
            background: linear-gradient(90deg, rgba(255,255,255,0.05) 25%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.05) 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
    </style>
</head>
<body class="font-tajawal text-white">

    <!-- Top Banner -->
    <div class="bg-gradient-to-l from-purple-900/60 via-indigo-900/60 to-purple-900/60 border-b border-purple-500/20">
        <div class="marquee-container py-2.5">
            <span class="marquee-text text-sm text-purple-200/90">âœ¨ Ù†Ø¹Ù…Ù„ Ø®Ù„Ù Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØ³ Ù„ØªØ·ÙˆÙŠØ± Ù…Ø³Ø§Ø±ÙŠ â€” Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ù‚Ø§Ø¯Ù…Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹ âœ¨</span>
        </div>
    </div>

    <!-- Header -->
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between animate-in delay-1">
        <a href="dashboard.html" class="flex items-center gap-2 text-purple-300/70 hover:text-white transition text-sm">
            <svg class="w-5 h-5 rotate-180" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/></svg>
            <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
        </a>
        <h1 class="text-lg font-bold">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</h1>
        <div class="w-16"></div>
    </div>

    <!-- Page Content -->
    <div class="max-w-5xl mx-auto px-4 pb-12">

        <!-- Title -->
        <div class="animate-in delay-1 text-center mb-10">
            <h2 class="text-3xl sm:text-4xl font-black mb-2">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ù„Ù„ØªØ¯Ø±ÙŠØ¨</h2>
            <p class="text-purple-300/50 text-sm">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù„ÙŠ ØªØ¨ÙŠÙ‡</p>
        </div>

        <!-- Cards Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-5">

            <!-- Ù‚Ø¯Ø±Ø§Øª ÙƒÙ…ÙŠ -->
            <div class="animate-in delay-2 section-card card-quant p-6">
                <div class="flex items-center gap-4 mb-5">
                    <div class="icon-circle icon-quant">ğŸ“Š</div>
                    <div>
                        <h3 class="text-xl font-black">Ù‚Ø¯Ø±Ø§Øª ÙƒÙ…ÙŠ</h3>
                        <p class="text-purple-300/40 text-xs">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„Ø­Ø³Ø§Ø¨</p>
                    </div>
                </div>

                <div class="flex flex-wrap gap-1.5 mb-5">
                    <span class="subject-tag tag-quant">âœ“ Ø§Ù„Ø¬Ø¨Ø± ÙˆØ§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª</span>
                    <span class="subject-tag tag-quant">âœ“ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©</span>
                    <span class="subject-tag tag-quant">âœ“ Ø§Ù„Ù†Ø³Ø¨Ø© ÙˆØ§Ù„ØªÙ†Ø§Ø³Ø¨</span>
                    <span class="subject-tag tag-quant">âœ“ Ø§Ù„Ø¥Ø­ØµØ§Ø¡</span>
                </div>

                <div class="count-badge mb-4">
                    <span class="text-2xl font-black text-blue-400" id="quantCount">â€”</span>
                    <span class="text-purple-300/40 text-xs block">Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­</span>
                </div>

                <button id="quantBtn" class="btn-start btn-quant" onclick="startTraining('quant')">
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
                </button>
            </div>

            <!-- Ù‚Ø¯Ø±Ø§Øª Ù„ÙØ¸ÙŠ -->
            <div class="animate-in delay-3 section-card card-verbal p-6">
                <div class="flex items-center gap-4 mb-5">
                    <div class="icon-circle icon-verbal">ğŸ“–</div>
                    <div>
                        <h3 class="text-xl font-black">Ù‚Ø¯Ø±Ø§Øª Ù„ÙØ¸ÙŠ</h3>
                        <p class="text-purple-300/40 text-xs">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p>
                    </div>
                </div>

                <div class="flex flex-wrap gap-1.5 mb-5">
                    <span class="subject-tag tag-verbal">âœ“ Ø§Ù„ØªÙ†Ø§Ø¸Ø± Ø§Ù„Ù„ÙØ¸ÙŠ</span>
                    <span class="subject-tag tag-verbal">âœ“ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¬Ù…Ù„</span>
                    <span class="subject-tag tag-verbal">âœ“ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠ</span>
                    <span class="subject-tag tag-verbal">âœ“ Ø§Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡</span>
                </div>

                <div class="count-badge mb-4">
                    <span class="text-2xl font-black text-emerald-400" id="verbalCount">â€”</span>
                    <span class="text-purple-300/40 text-xs block">Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­</span>
                </div>

                <button id="verbalBtn" class="btn-start btn-verbal" onclick="startTraining('verbal')">
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
                </button>
            </div>

            <!-- Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ -->
            <div class="animate-in delay-4 section-card card-tahsili p-6">
                <div class="flex items-center gap-4 mb-5">
                    <div class="icon-circle icon-tahsili">ğŸ“</div>
                    <div>
                        <h3 class="text-xl font-black">Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ</h3>
                        <p class="text-purple-300/40 text-xs">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</p>
                    </div>
                </div>

                <div class="flex flex-wrap gap-1.5 mb-5">
                    <span class="subject-tag tag-tahsili">âœ“ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</span>
                    <span class="subject-tag tag-tahsili">âœ“ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</span>
                    <span class="subject-tag tag-tahsili">âœ“ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</span>
                    <span class="subject-tag tag-tahsili">âœ“ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</span>
                </div>

                <div class="count-badge mb-4">
                    <span class="text-2xl font-black text-purple-400" id="tahsiliCount">â€”</span>
                    <span class="text-purple-300/40 text-xs block">Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­</span>
                </div>

                <button id="tahsiliBtn" class="btn-start btn-tahsili" onclick="startTraining('tahsili')">
                    Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
                </button>
            </div>
        </div>

        <p class="text-center text-purple-300/20 text-xs mt-10">Ù…Ø³Ø§Ø±ÙŠ v1.0</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const sb = window.supabase.createClient(
            'https://czzcmbxejxbotjemyuqf.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6emNtYnhlanhib3RqZW15dXFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNzQ0ODEsImV4cCI6MjA4NTc1MDQ4MX0.xDfG1qsDZGyUrpL44JfqOtk57dVsLaMsvIzJz1KgiR0'
        );

        async function loadQuestionCounts() {
            try {
                const { data: questions, error } = await sb
                    .from('questions')
                    .select('section');

                if (error) { console.error('Error:', error); return; }

                const quantCount = questions.filter(function(q) { return q.section === 'quant'; }).length;
                const verbalCount = questions.filter(function(q) { return q.section === 'verbal'; }).length;
                const tahsiliCount = questions.filter(function(q) { return q.section === 'tahsili'; }).length;

                document.getElementById('quantCount').textContent = quantCount;
                document.getElementById('verbalCount').textContent = verbalCount;
                document.getElementById('tahsiliCount').textContent = tahsiliCount;

                document.getElementById('quantBtn').disabled = (quantCount === 0);
                document.getElementById('verbalBtn').disabled = (verbalCount === 0);
                document.getElementById('tahsiliBtn').disabled = (tahsiliCount === 0);
            } catch (err) {
                console.error('Error:', err);
            }
        }

        function startTraining(section) {
            localStorage.setItem('masari_selected_section', section);
            window.location.href = 'practice.html';
        }

        window.addEventListener('DOMContentLoaded', function() {
            loadQuestionCounts();
        });
    </script>
</body>
</html>
