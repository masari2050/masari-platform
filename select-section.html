<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… - Ù…Ø³Ø§Ø±ÙŠ</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Tajawal', sans-serif; }
  </style>
</head>

<body class="bg-gray-50 min-h-screen">

  <!-- Top bar -->
  <div class="w-full bg-white border-b">
    <div class="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
      <div class="text-lg font-bold text-gray-800">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù…</div>
      <a href="dashboard.html" class="text-gray-600 hover:text-gray-900">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ÙˆØ­Ø©</a>
    </div>
  </div>

  <!-- Page -->
  <div class="max-w-6xl mx-auto px-4 py-10">
    <div class="text-center mb-10">
      <h1 class="text-4xl font-extrabold text-gray-900 mb-3">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ù„Ù„ØªØ¯Ø±ÙŠØ¨</h1>
      <p class="text-gray-600">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù…</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

      <!-- Quant -->
      <div class="bg-white rounded-2xl shadow-sm border-2 border-blue-100 p-7">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h2 class="text-3xl font-extrabold text-gray-900">Ù‚Ø¯Ø±Ø§Øª ÙƒÙ…ÙŠ</h2>
            <p class="text-gray-600 mt-1">Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª ÙˆØ§Ù„Ø­Ø³Ø§Ø¨</p>
          </div>
          <div class="w-14 h-14 rounded-xl bg-blue-600 flex items-center justify-center text-white text-2xl">ğŸ“Š</div>
        </div>

        <ul class="text-gray-700 space-y-2 mb-6">
          <li>âœ“ Ø§Ù„Ø¬Ø¨Ø± ÙˆØ§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª</li>
          <li>âœ“ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø©</li>
          <li>âœ“ Ø§Ù„Ù†Ø³Ø¨Ø© ÙˆØ§Ù„ØªÙ†Ø§Ø³Ø¨</li>
          <li>âœ“ Ø§Ù„Ø¥Ø­ØµØ§Ø¡</li>
        </ul>

        <div class="rounded-xl bg-blue-50 text-blue-700 px-4 py-3 text-center font-bold mb-4">
          <span id="quantCount">â€”</span> Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­
        </div>

        <button
          id="quantBtn"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold transition"
          onclick="startTraining('quant')"
        >
          Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
        </button>
      </div>

      <!-- Verbal -->
      <div class="bg-white rounded-2xl shadow-sm border-2 border-green-100 p-7">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h2 class="text-3xl font-extrabold text-gray-900">Ù‚Ø¯Ø±Ø§Øª Ù„ÙØ¸ÙŠ</h2>
            <p class="text-gray-600 mt-1">Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</p>
          </div>
          <div class="w-14 h-14 rounded-xl bg-green-600 flex items-center justify-center text-white text-2xl">ğŸ“–</div>
        </div>

        <ul class="text-gray-700 space-y-2 mb-6">
          <li>âœ“ Ø§Ù„ØªÙ†Ø§Ø¸Ø± Ø§Ù„Ù„ÙØ¸ÙŠ</li>
          <li>âœ“ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø¬Ù…Ù„</li>
          <li>âœ“ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„Ø³ÙŠØ§Ù‚ÙŠ</li>
          <li>âœ“ Ø§Ù„Ø§Ø³ØªÙŠØ¹Ø§Ø¨ Ø§Ù„Ù…Ù‚Ø±ÙˆØ¡</li>
        </ul>

        <div class="rounded-xl bg-green-50 text-green-700 px-4 py-3 text-center font-bold mb-4">
          <span id="verbalCount">â€”</span> Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­
        </div>

        <button
          id="verbalBtn"
          class="w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold transition"
          onclick="startTraining('verbal')"
        >
          Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
        </button>
      </div>

      <!-- Tahsili -->
      <div class="bg-white rounded-2xl shadow-sm border-2 border-purple-100 p-7">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h2 class="text-3xl font-extrabold text-gray-900">Ø§Ù„ØªØ­ØµÙŠÙ„ÙŠ</h2>
            <p class="text-gray-600 mt-1">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</p>
          </div>
          <div class="w-14 h-14 rounded-xl bg-purple-600 flex items-center justify-center text-white text-2xl">ğŸ“</div>
        </div>

        <ul class="text-gray-700 space-y-2 mb-6">
          <li>âœ“ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª</li>
          <li>âœ“ Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡</li>
          <li>âœ“ Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡</li>
          <li>âœ“ Ø§Ù„Ø£Ø­ÙŠØ§Ø¡</li>
        </ul>

        <div class="rounded-xl bg-purple-50 text-purple-700 px-4 py-3 text-center font-bold mb-4">
          <span id="tahsiliCount">â€”</span> Ø³Ø¤Ø§Ù„ Ù…ØªØ§Ø­
        </div>

        <button
          id="tahsiliBtn"
          class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-bold transition"
          onclick="startTraining('tahsili')"
        >
          Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
        </button>
      </div>

    </div>
  </div>

<!-- ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© -->
<script>
    // ØªÙ‡ÙŠØ¦Ø© Supabase
    const supabaseUrl = 'https://czzcmbxejxbotjemyuqf.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6emNtYnhlanhib3RqZW15dXFmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNzQ0ODEsImV4cCI6MjA4NTc1MDQ4MX0.xDfG1qsDZGyUrpL44JfqOtk57dVsLaMsvIzJz1KgiR0';
    const sb = window.supabase.createClient(supabaseUrl, supabaseKey);
    
    // ØªØ­Ù…ÙŠÙ„ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Supabase
    async function loadQuestionCounts() {
        try {
            console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…Ù† Supabase...');
            
            // Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
            const { data: questions, error } = await sb
                .from('questions')
                .select('section');
            
            if (error) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:', error);
                return;
            }
            
            console.log('âœ… ØªÙ… Ø¬Ù„Ø¨', questions.length, 'Ø³Ø¤Ø§Ù„ Ù…Ù† Supabase');
            
            // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯ Ù„ÙƒÙ„ Ù‚Ø³Ù…
            const quantCount = questions.filter(q => q.section === 'quant').length;
            const verbalCount = questions.filter(q => q.section === 'verbal').length;
            const tahsiliCount = questions.filter(q => q.section === 'tahsili').length;
            
            console.log('ğŸ“Š Ù‚Ø¯Ø±Ø§Øª ÙƒÙ…ÙŠ:', quantCount);
            console.log('ğŸ“Š Ù‚Ø¯Ø±Ø§Øª Ù„ÙØ¸ÙŠ:', verbalCount);
            console.log('ğŸ“Š ØªØ­ØµÙŠÙ„ÙŠ:', tahsiliCount);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
            document.getElementById('quantCount').textContent = quantCount;
            document.getElementById('verbalCount').textContent = verbalCount;
            document.getElementById('tahsiliCount').textContent = tahsiliCount;
            
        } catch (err) {
            console.error('âŒ Ø®Ø·Ø£:', err);
        }
    }
    
    // Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
    function startTraining(section) {
        console.log('ğŸ¯ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±:', section);
        
        // Ø­ÙØ¸ Ø§Ù„Ù‚Ø³Ù…
        localStorage.setItem('masari_selected_section', section);
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
        window.location.href = 'practice.html';
    }
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', loadQuestionCounts);
</script>

<script>
    // ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
    const questionsBank = window.questionsBank || [];
    
    console.log('ğŸ“š Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙÙŠ Ø§Ù„Ø¨Ù†Ùƒ:', questionsBank.length);
    
    // Ø¯Ø§Ù„Ø© Ù„Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù„ÙƒÙ„ Ù‚Ø³Ù…
    function getQuestionCount(section) {
        if (!questionsBank || questionsBank.length === 0) return 0;
        const count = questionsBank.filter(q => q.section === section).length;
        console.log(`Ø¹Ø¯Ø¯ Ø£Ø³Ø¦Ù„Ø© ${section}:`, count);
        return count;
    }
    
    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸ”„ Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ø§Ø¯Ø§Øª...');
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø¹Ø¯Ø§Ø¯
        const verbalCount = getQuestionCount('verbal');
        const quantCount = getQuestionCount('quant');
        const tahsiliCount = getQuestionCount('tahsili');
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… IDs
        const quantElement = document.getElementById('quantCount');
        const verbalElement = document.getElementById('verbalCount');
        const tahsiliElement = document.getElementById('tahsiliCount');
        
        if (quantElement) {
            quantElement.textContent = quantCount;
            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ù‚Ø¯Ø±Ø§Øª ÙƒÙ…ÙŠ:', quantCount);
        }
        
        if (verbalElement) {
            verbalElement.textContent = verbalCount;
            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ù‚Ø¯Ø±Ø§Øª Ù„ÙØ¸ÙŠ:', verbalCount);
        }
        
        if (tahsiliElement) {
            tahsiliElement.textContent = tahsiliCount;
            console.log('âœ… ØªÙ… ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ ØªØ­ØµÙŠÙ„ÙŠ:', tahsiliCount);
        }
        
        // ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø­Ø³Ø¨ ØªÙˆÙØ± Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        const quantBtn = document.getElementById('quantBtn');
        const verbalBtn = document.getElementById('verbalBtn');
        const tahsiliBtn = document.getElementById('tahsiliBtn');
        
        if (quantBtn) quantBtn.disabled = (quantCount === 0);
        if (verbalBtn) verbalBtn.disabled = (verbalCount === 0);
        if (tahsiliBtn) tahsiliBtn.disabled = (tahsiliCount === 0);
    });
    
    // Ø¯Ø§Ù„Ø© Ø¨Ø¯Ø¡ Ø§Ù„ØªØ¯Ø±ÙŠØ¨
    function startTraining(section) {
        console.log('ğŸ¯ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±:', section);
        
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø£Ø³Ø¦Ù„Ø©
        const count = getQuestionCount(section);
        if (count === 0) {
            alert('Ù…Ø§ ÙÙŠÙ‡ Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ§Ø­Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø³Ù… Ø­Ø§Ù„ÙŠØ§Ù‹');
            return;
        }
        
        // Ø­ÙØ¸ Ø§Ù„Ù‚Ø³Ù… ÙÙŠ localStorage
        localStorage.setItem('masari_selected_section', section);
        console.log('ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù‚Ø³Ù… ÙÙŠ localStorage');
        
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨
        console.log('â¡ï¸ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„ØµÙØ­Ø© Ø§Ù„ØªØ¯Ø±ÙŠØ¨...');
        window.location.href = 'practice.html';
    }
</script>

</body>
</html>
